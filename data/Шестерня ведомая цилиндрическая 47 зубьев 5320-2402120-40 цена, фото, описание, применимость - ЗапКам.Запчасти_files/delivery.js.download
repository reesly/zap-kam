void 0===window.csbl_api&&(window.csbl_api={},function(){"use strict";var t,c,a,y=function(e){return(e={XX:"RU"}[e]||e).toLowerCase()};if(void 0===window.jQuery||"1.12.1"!==window.jQuery.fn.jquery){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","https://code.jquery.com/jquery-1.12.4.min.js"),e.readyState?e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||i()}:e.onload=i,(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(e)}else l(a=window.jQuery);function i(){l(a=window.jQuery.noConflict(!0))}function l(S){var e;e=function(v){function l(e,t){var c=v.noop,a=this,i={ajaxSettings:{},autoSelectFirst:!1,appendTo:document.body,serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:l.formatResult,delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:c,onSearchComplete:c,onSearchError:c,preserveInput:!1,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(e,t,c){return-1!==e.value.toLowerCase().indexOf(c)},paramName:"query",transformResult:function(e){return"string"==typeof e?v.parseJSON(e):e},showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1};a.element=e,a.el=v(e),a.suggestions=[],a.badQueries=[],a.selectedIndex=-1,a.currentValue=a.element.value,a.intervalId=0,a.cachedResponse={},a.onChangeInterval=null,a.onChange=null,a.isLocal=!1,a.suggestionsContainer=null,a.noSuggestionsContainer=null,a.options=v.extend({},i,t),a.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},a.hint=null,a.hintValue="",a.selection=null,a.initialize(),a.setOptions(t)}var a={escapeRegExChars:function(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},createNode:function(e){var t=document.createElement("div");return t.className=e,t.style.position="absolute",t.style.display="none",t}},c=27,i=9,s=13,n=38,o=39,r=40;l.utils=a,(v.Autocomplete=l).formatResult=function(e,t){if(!t)return e.value;var c="("+a.escapeRegExChars(t)+")";return e.value.replace(new RegExp(c,"gi"),"<strong>$1</strong>").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>")},l.prototype={killerFn:null,initialize:function(){var e,t=this,c="."+t.classes.suggestion,a=t.classes.selected,i=t.options;t.element.setAttribute("autocomplete","off"),t.killerFn=function(e){v(e.target).closest("."+t.options.containerClass).length||(t.killSuggestions(),t.disableKillerFn())},t.noSuggestionsContainer=v('<div class="autocomplete-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0),t.suggestionsContainer=l.utils.createNode(i.containerClass),(e=v(t.suggestionsContainer)).appendTo(i.appendTo),"auto"!==i.width&&e.css("width",i.width),e.on("mouseover.autocomplete",c,function(){t.activate(v(this).data("index"))}),e.on("mouseout.autocomplete",function(){t.selectedIndex=-1,e.children("."+a).removeClass(a)}),e.on("click.autocomplete",c,function(){return t.select(v(this).data("index")),!1}),t.fixPositionCapture=function(){t.visible&&t.fixPosition()},v(window).on("resize.autocomplete",t.fixPositionCapture),t.el.on("keydown.autocomplete",function(e){t.onKeyPress(e)}),t.el.on("keyup.autocomplete",function(e){t.onKeyUp(e)}),t.el.on("blur.autocomplete",function(){t.onBlur()}),t.el.on("focus.autocomplete",function(){t.onFocus()}),t.el.on("change.autocomplete",function(e){t.onKeyUp(e)}),t.el.on("input.autocomplete",function(e){t.onKeyUp(e)})},onFocus:function(){var e=this;e.fixPosition(),e.el.val().length>=e.options.minChars&&e.onValueChange()},onBlur:function(){this.enableKillerFn()},abortAjax:function(){var e=this;e.currentRequest&&(e.currentRequest.abort(),e.currentRequest=null)},setOptions:function(e){var t=this,c=t.options;v.extend(c,e),t.isLocal=v.isArray(c.lookup),t.isLocal&&(c.lookup=t.verifySuggestionsFormat(c.lookup)),c.orientation=t.validateOrientation(c.orientation,"bottom"),v(t.suggestionsContainer).css({"max-height":c.maxHeight+"px",width:c.width+"px","z-index":c.zIndex})},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){this.disabled=!0,clearInterval(this.onChangeInterval),this.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var e=this,t=v(e.suggestionsContainer),c=t.parent().get(0);if(c===document.body||e.options.forceFixPosition){var a=e.options.orientation,i=t.outerHeight(),l=e.el.outerHeight(),s=e.el.offset(),n={top:s.top,left:s.left};if("auto"===a){var o=v(window).height(),r=v(window).scrollTop(),u=-r+s.top-i,d=r+o-(s.top+l+i);a=Math.max(u,d)===u?"top":"bottom"}if(n.top+="top"===a?-i:l,c!==document.body){var p,h=t.css("opacity");e.visible||t.css("opacity",0).show(),p=t.offsetParent().offset(),n.top-=p.top,n.left-=p.left,e.visible||t.css("opacity",h).hide()}"auto"===e.options.width&&(n.width=e.el.outerWidth()+"px"),t.css(n)}},enableKillerFn:function(){v(document).on("click.autocomplete",this.killerFn)},disableKillerFn:function(){v(document).off("click.autocomplete",this.killerFn)},killSuggestions:function(){var e=this;e.stopKillSuggestions(),e.intervalId=window.setInterval(function(){e.visible&&(e.options.preserveInput||e.el.val(e.currentValue),e.hide()),e.stopKillSuggestions()},50)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},isCursorAtEnd:function(){var e,t=this.el.val().length,c=this.element.selectionStart;return"number"==typeof c?c===t:!document.selection||((e=document.selection.createRange()).moveStart("character",-t),t===e.text.length)},onKeyPress:function(e){var t=this;if(t.disabled||t.visible||e.which!==r||!t.currentValue){if(!t.disabled&&t.visible){switch(e.which){case c:t.el.val(t.currentValue),t.hide();break;case o:if(t.hint&&t.options.onHint&&t.isCursorAtEnd()){t.selectHint();break}return;case i:if(t.hint&&t.options.onHint)return void t.selectHint();if(-1===t.selectedIndex)return void t.hide();if(t.select(t.selectedIndex),!1===t.options.tabDisabled)return;break;case s:if(-1===t.selectedIndex)return void t.hide();t.select(t.selectedIndex);break;case n:t.moveUp();break;case r:t.moveDown();break;default:return}e.stopImmediatePropagation(),e.preventDefault()}}else t.suggest()},onKeyUp:function(e){var t=this;if(!t.disabled){switch(e.which){case n:case r:return}clearInterval(t.onChangeInterval),t.currentValue!==t.el.val()&&(t.findBestHint(),0<t.options.deferRequestBy?t.onChangeInterval=setInterval(function(){t.onValueChange()},t.options.deferRequestBy):t.onValueChange())}},onValueChange:function(){var e=this,t=e.options,c=e.el.val(),a=e.getQuery(c);return e.selection&&e.currentValue!==a&&(e.selection=null,(t.onInvalidateSelection||v.noop).call(e.element)),clearInterval(e.onChangeInterval),e.currentValue=c,e.selectedIndex=-1,t.triggerSelectOnValidInput&&e.isExactMatch(a)?void e.select(0):void(a.length<t.minChars?e.hide():e.getSuggestions(a))},isExactMatch:function(e){var t=this.suggestions;return 1===t.length&&t[0].value.toLowerCase()===e.toLowerCase()},getQuery:function(e){var t,c=this.options.delimiter;return c?(t=e.split(c),v.trim(t[t.length-1])):e},getSuggestionsLocal:function(t){var e,c=this.options,a=t.toLowerCase(),i=c.lookupFilter,l=parseInt(c.lookupLimit,10);return e={suggestions:v.grep(c.lookup,function(e){return i(e,t,a)})},l&&e.suggestions.length>l&&(e.suggestions=e.suggestions.slice(0,l)),e},getSuggestions:function(a){var e,t,c,i,l=this,s=l.options,n=s.serviceUrl;if(s.params[s.paramName]=a,t=s.ignoreParams?null:s.params,!1!==s.onSearchStart.call(l.element,s.params)){if(v.isFunction(s.lookup))return void s.lookup(a,function(e){l.suggestions=e.suggestions,l.suggest(),s.onSearchComplete.call(l.element,a,e.suggestions)});(e=l.isLocal?l.getSuggestionsLocal(a):(v.isFunction(n)&&(n=n.call(l.element,a)),c=n+"?"+v.param(t||{}),l.cachedResponse[c]))&&v.isArray(e.suggestions)?(l.suggestions=e.suggestions,l.suggest(),s.onSearchComplete.call(l.element,a,e.suggestions)):l.isBadQuery(a)?s.onSearchComplete.call(l.element,a,[]):(l.abortAjax(),i={url:n,data:t,type:s.type,dataType:s.dataType},v.extend(i,s.ajaxSettings),l.currentRequest=v.ajax(i).done(function(e){var t;l.currentRequest=null,t=s.transformResult(e,a),l.processResponse(t,a,c),s.onSearchComplete.call(l.element,a,t.suggestions)}).fail(function(e,t,c){s.onSearchError.call(l.element,a,e,t,c)}))}},isBadQuery:function(e){if(!this.options.preventBadQueries)return!1;for(var t=this.badQueries,c=t.length;c--;)if(0===e.indexOf(t[c]))return!0;return!1},hide:function(){var e=this,t=v(e.suggestionsContainer);v.isFunction(e.options.onHide)&&e.visible&&e.options.onHide.call(e.element,t),e.visible=!1,e.selectedIndex=-1,clearInterval(e.onChangeInterval),v(e.suggestionsContainer).hide(),e.signalHint(null)},suggest:function(){if(this.suggestions.length){var a,e=this,t=e.options,i=t.groupBy,l=t.formatResult,s=e.getQuery(e.currentValue),n=e.classes.suggestion,c=e.classes.selected,o=v(e.suggestionsContainer),r=v(e.noSuggestionsContainer),u=t.beforeRender,d="";return t.triggerSelectOnValidInput&&e.isExactMatch(s)?void e.select(0):(v.each(e.suggestions,function(e,t){var c;i&&(d+=(c=t.data[i],a===c?"":'<div class="autocomplete-group"><strong>'+(a=c)+"</strong></div>")),d+='<div class="'+n+'" data-index="'+e+'">'+l(t,s,e)+"</div>"}),this.adjustContainerWidth(),r.detach(),o.html(d),v.isFunction(u)&&u.call(e.element,o,e.suggestions),e.fixPosition(),o.show(),t.autoSelectFirst&&(e.selectedIndex=0,o.scrollTop(0),o.children("."+n).first().addClass(c)),e.visible=!0,void e.findBestHint())}this.options.showNoSuggestionNotice?this.noSuggestions():this.hide()},noSuggestions:function(){var e=v(this.suggestionsContainer),t=v(this.noSuggestionsContainer);this.adjustContainerWidth(),t.detach(),e.empty(),e.append(t),this.fixPosition(),e.show(),this.visible=!0},adjustContainerWidth:function(){var e,t=this.options,c=v(this.suggestionsContainer);"auto"===t.width&&(e=this.el.outerWidth(),c.css("width",0<e?e:300))},findBestHint:function(){var a=this.el.val().toLowerCase(),i=null;a&&(v.each(this.suggestions,function(e,t){var c=0===t.value.toLowerCase().indexOf(a);return c&&(i=t),!c}),this.signalHint(i))},signalHint:function(e){var t="",c=this;e&&(t=c.currentValue+e.value.substr(c.currentValue.length)),c.hintValue!==t&&(c.hintValue=t,c.hint=e,(this.options.onHint||v.noop)(t))},verifySuggestionsFormat:function(e){return e.length&&"string"==typeof e[0]?v.map(e,function(e){return{value:e,data:null}}):e},validateOrientation:function(e,t){return e=v.trim(e||"").toLowerCase(),-1===v.inArray(e,["auto","bottom","top"])&&(e=t),e},processResponse:function(e,t,c){var a=this,i=a.options;e.suggestions=a.verifySuggestionsFormat(e.suggestions),i.noCache||(a.cachedResponse[c]=e,i.preventBadQueries&&!e.suggestions.length&&a.badQueries.push(t)),t===a.getQuery(a.currentValue)&&(a.suggestions=e.suggestions,a.suggest())},activate:function(e){var t,c=this,a=c.classes.selected,i=v(c.suggestionsContainer),l=i.find("."+c.classes.suggestion);return i.find("."+a).removeClass(a),c.selectedIndex=e,-1!==c.selectedIndex&&l.length>c.selectedIndex?(t=l.get(c.selectedIndex),v(t).addClass(a),t):null},selectHint:function(){var e=v.inArray(this.hint,this.suggestions);this.select(e)},select:function(e){this.hide(),this.onSelect(e)},moveUp:function(){var e=this;if(-1!==e.selectedIndex)return 0===e.selectedIndex?(v(e.suggestionsContainer).children().first().removeClass(e.classes.selected),e.selectedIndex=-1,e.el.val(e.currentValue),void e.findBestHint()):void e.adjustScroll(e.selectedIndex-1)},moveDown:function(){this.selectedIndex!==this.suggestions.length-1&&this.adjustScroll(this.selectedIndex+1)},adjustScroll:function(e){var t=this,c=t.activate(e);if(c){var a,i,l,s=v(c).outerHeight();a=c.offsetTop,l=(i=v(t.suggestionsContainer).scrollTop())+t.options.maxHeight-s,a<i?v(t.suggestionsContainer).scrollTop(a):l<a&&v(t.suggestionsContainer).scrollTop(a-t.options.maxHeight+s),t.options.preserveInput||t.el.val(t.getValue(t.suggestions[e].value)),t.signalHint(null)}},onSelect:function(e){var t=this,c=t.options.onSelect,a=t.suggestions[e];t.currentValue=t.getValue(a.value),t.currentValue===t.el.val()||t.options.preserveInput||t.el.val(t.currentValue),t.signalHint(null),t.suggestions=[],t.selection=a,v.isFunction(c)&&c.call(t.element,a)},getValue:function(e){var t,c,a=this.options.delimiter;return a?1===(c=(t=this.currentValue).split(a)).length?e:t.substr(0,t.length-c[c.length-1].length)+e:e},dispose:function(){this.el.off(".autocomplete").removeData("autocomplete"),this.disableKillerFn(),v(window).off("resize.autocomplete",this.fixPositionCapture),v(this.suggestionsContainer).remove()}},v.fn.autocomplete=v.fn.devbridgeAutocomplete=function(c,a){var i="autocomplete";return arguments.length?this.each(function(){var e=v(this),t=e.data(i);"string"==typeof c?t&&"function"==typeof t[c]&&t[c](a):(t&&t.dispose&&t.dispose(),t=new l(this,c),e.data(i,t))}):this.first().data(i)}},"function"==typeof c&&c.amd?c(["jquery"],e):e("object"==typeof exports&&"function"==typeof t?t("jquery"):a);function g(){var l,e=S("#ecCalcCityFrom").val(),t=S("#ecCalcCityFromHidden").val(),c=S("#ecCalcAreaFromHidden").val(),a=S("#ecCalcCityTo").val(),i=S("#ecCalcCityToHidden").val(),s=S("#ecCalcAreaToHidden").val(),n=(l="",S('[id^="clonedInput"]').each(function(e,t){var c=""==S(this).find(".cCalcWeight").val()?0:S(this).find(".cCalcWeight").val(),a=""==S(this).find(".cCalcValue").val()?0:S(this).find(".cCalcValue").val(),i=S("#ecCalcCheckLathing").is(":checked")?1:0;l+="&hsw[]=0&weights[]="+c+"&volumes[]="+a+"&quantities[]=1&palletize[]=0&lathing[]="+i}),l),k=S("#ecCalcCheckPickup").is(":checked")||1==m.startPickCheck?1:0,I=S("#ecCalcCheckDelivery").is(":checked")?1:0,w=S("#ecCalcCheckLathing").is(":checked")?1:0,o=S("#ecCalcCheckInsure").is(":checked")?1:0,r=""==S("#ecCalcCheckInsureVal").val()?0:S("#ecCalcCheckInsureVal").val(),u=0!=m.comp?m.comp.split(","):0,d="";if(Number((4*Math.random()).toFixed(0)),0<S("#sizeWidth").val()&&0<S("#sizeHeight").val()&&S("#sizeLong").val(),0!==u&&-1==u.indexOf("0"))for(var p=u.length-1;0<=p;p--)d+="&clientIds[]="+u[p];else d="";if(e.length&&!t.length)return R({"Ошибка":"Город отправки не найден или не корректно введён."});if(!e.length||!t.length)return R({"Ошибка":"Не указан город отправки."});if(a.length&&!i.length)return R({"Ошибка":"Город прибытия не найден или не корректно введён."});if(!a.length||!i.length)return R({"Ошибка":"Не указан город прибытия."});if(2<=S('[id^="clonedInput"]').length){var h=!0;if(S('[id^="clonedInput"]').each(function(){if(""==S(this).find(".cCalcWeight").val()||""==S(this).find(".cCalcValue").val())return h=!1,R({"Ошибка":"Если у вас несколько мест, укажите вес и объем каждого места."})}),!h)return h}else{if(""==S(".cCalcWeight").val()&&""==S(".cCalcValue").val()||0==S(".cCalcWeight").val()&&0==S(".cCalcValue").val())return R({"Ошибка":"Заполните поле вес или объем."});if(1==w){if(""==S(".cCalcWeight").val()||""==S(".cCalcValue").val())return R({"Ошибка":"Для опции обрешетки заполните поля вес и объем (размеры)."});console.log("proccesing")}}S(".ec-calc-border-load-bar").fadeIn(),S.getJSON(f+"/calc/place?from-country="+encodeURIComponent(t)+"&from-city="+encodeURIComponent(e)+"&from-area="+encodeURIComponent(c)+"&to-country="+encodeURIComponent(i)+"&to-city="+encodeURIComponent(a)+"&to-area="+encodeURIComponent(s)+n+"&need-pickup="+k+"&need-deliver="+I+"&widget=dostavka&palletize[]=0&need-insuring="+o+"&cargo-price="+r+"&need-labeling=0"+d).done(function(e,t){if(e.errors||!e.result[0])return R(e.errors),setTimeout(function(){S(".ec-calc-border-load-bar").fadeOut(),S(".ec-calc-form, .ec-calc-border, .ec-calc__header").show()},1e3),!1;S("#ecCalcResultTbody tr").remove();for(var c=0;c<e.result.length;c++){var a=null==e.result[c].nearby_from_city?"":"<div>"+e.result[c].nearby_from_city+" - "+e.result[c].from_city+" <strong>"+e.result[c].nearby_pickup_rate+" руб.</strong></div>",i="premium"==e.result[c].status,l=null==e.result[c].auto_transit||0==e.result[c].auto_transit?"":"<div>"+e.result[c].from_city+" - "+e.result[c].to_city+" <strong>"+e.result[c].auto_transit+" руб.</strong> (авто) </div>",s=null==e.result[c].rail_transit||0==e.result[c].rail_transit?"":"<div>"+e.result[c].from_city+" - "+e.result[c].to_city+" <strong>"+e.result[c].rail_transit+" руб.</strong> (жд) </div>",n=null==e.result[c].air_transit||0==e.result[c].air_transit?"":"<div>"+e.result[c].from_city+" - "+e.result[c].to_city+" <strong>"+e.result[c].air_transit+" руб.</strong> (авиа) </div>",o=null==e.result[c].nearby_to_city?"":"<div>"+e.result[c].to_city+" - "+e.result[c].nearby_to_city+" <strong>"+e.result[c].nearby_deliver_rate+" руб.</strong></div>",r=0==k||0==e.result[c].pickup_rate||null==e.result[c].pickup_rate?"":'<div class="ec-calc-result__insurin">+ забор - <b>'+e.result[c].pickup_rate+" руб.</b></div>",u=0==I||0==e.result[c].deliver_rate||null==e.result[c].deliver_rate?"":'<div class="ec-calc-result__insurin">+ доставка - <b>'+e.result[c].deliver_rate+" руб.</b></div>",d=0!=e.result[c].boarding_sum&&1==w?'<div class="ec-calc-result__insurin">+ обрешетка - <b>'+e.result[c].boarding_sum+" руб.</b></div>":"",p=0!=e.result[c].insure_sum?'<div class="ec-calc-result__insurin">+ страховка - <b>'+e.result[c].insure_sum+" руб.</b></div>":"",h=0!=e.result[c].to_filial_entry_rate&&0==k?'<div class="ec-calc-result__insurin">+ <b>'+e.result[c].to_city+"</b>: въезд на терминал - <b>"+e.result[c].to_filial_entry_rate+" руб.</b></div>":"",v=0!=e.result[c].from_filial_entry_rate&&0==I?'<div class="ec-calc-result__insurin">+ <b>'+e.result[c].from_city+"</b>: въезд на терминал - <b>"+e.result[c].from_filial_entry_rate+" руб.</b></div>":"",g=e.result[c].company_name,f=-1==e.result[c].auto_period||0==e.result[c].auto_period?"":'<span class="ec-calc-result-table__days">- '+e.result[c].auto_period+" дн.</span>",m=-1==e.result[c].rail_period||0==e.result[c].rail_period?"":'<span class="ec-calc-result-table__days">- '+e.result[c].rail_period+" дн.</span>",C=-1==e.result[c].air_period||0==e.result[c].air_period?"":'<span class="ec-calc-result-table__days">- '+e.result[c].air_period+" дн.</span>",y=null==e.result[c].auto_transit||0==e.result[c].auto_transit?"":'<div class="ec-calc-result-table__rouble">'+e.result[c].auto_total+" руб. (авто) "+f+"</div>",b=null==e.result[c].rail_transit||0==e.result[c].rail_transit?"":'<div class="ec-calc-result-table__rouble">'+e.result[c].rail_total+" руб. (жд) "+m+"</div>",_=null==e.result[c].air_transit||0==e.result[c].air_transit?"":'<div class="ec-calc-result-table__rouble">'+e.result[c].air_total+" руб. (авиа) "+C+"</div>",x="https://c.sbl.su/company/"+e.result[c].client_id;!r&&k||!u&&I||0==d&&w||S("#ecCalcResultTbody").append("<tr "+(i?"premium":"")+'><td><a target="_blank" href="'+x+'">'+g+'</a></td><td id="ecCalcResultRoute">'+a+l+s+n+o+r+u+d+p+h+v+"</td><td>"+y+b+_+"</td></tr>")}S("#ecCalcResultTbody").text().length<30&&S("#ecCalcResultTbody").html('<tr><td colspan="3">Таких маршрутов у компаний нету :(</td></tr>'),S(".ec-calc-error").hide(),setTimeout(function(){S("#ecCalcResult").show(),S(".ec-calc-border-load-bar").fadeOut();try{csblCustomFuncResult(S)}catch(e){}},1e3)}).fail(function(){S(".ec-calc-border-load-bar").fadeOut(),R({"Ошибка":"Похоже сервер не отвечает, попробуйте через 1 минуту"}),S(".ec-calc-form, .ec-calc-border, .ec-calc__header").show()})}var f="https://capi.sbl.su",m={theme:0,comp:0,btn:"yes",pos:"right",btnText:0,startCt:0,startCntr:0,startArea:0,autoEnd:0,autoResult:1,endCt:0,endCntr:0,endArea:0,startPick:0,startPickCheck:0,weight:0,value:0,size:0,sizeShow:0,btnBg:"#03a9f4",dopLathing:0,dopLathingImp:0,dopInsure:1,dopInsureSum:0,innerDeliv:0,title:0},C='<div class="ec-calc-layout" id="ecCalcLay"><div class="ec-calc--preload"></div>            <div class="ec-calc" id="ecCalc">                <div class="ec-calc__close">x</div>                <div class="ec-calc__header">                    <div class="ec-calc__header__text">Расчет доставки</div>                </div>                <div class="ec-calc-form">                    <div class="ec-calc-form-row">                        <div class="ec-calc-form-from">                            <div class="ec-calc-form__label">Откуда</div>                            <input type="text" id="ecCalcCityFrom">                            <input type="hidden" id="ecCalcCityFromHidden">                            <input type="hidden" id="ecCalcAreaFromHidden">                        </div>                        <div class="ec-calc-form-to">                            <div class="ec-calc-form__label">Куда</div>                            <input type="text" id="ecCalcCityTo">                            <input type="hidden" id="ecCalcCityToHidden">                            <input type="hidden" id="ecCalcAreaToHidden">                        </div>                    </div>                    <div class="ec-calc-form-row">                        <div class="ec-calc-form-pickup">                            <input type="checkbox" id="ecCalcCheckPickup">                            <label for="ecCalcCheckPickup" class="ec-calc-form__label">Забрать груз у отправителя</label>                            <div class="ec-calc-form-pickup__comment">Пометьте этот пункт если Интернет магазин не доставляет товар до терминала транспортной компании.</div>                        </div>                        <div class="ec-calc-form-delivery">                            <input type="checkbox" id="ecCalcCheckDelivery">                            <label for="ecCalcCheckDelivery" class="ec-calc-form__label">Доставка до дверей</label>                            <div class="ec-calc-form-delivery__comment">Обратите внимание у каждой компании могут быть свои условия доставки до дверей.</div>                        </div>                    </div>                    <div class="ec-calc-form-clone">                       <div class="ec-calc-form-row ec-calc-wrap-item" id="clonedInput">                        <div class="ec-calc-form-weight">                            <div class="ec-calc-form__label">Вес, кг</div>                            <input type="text" id="ecCalcWeight" class="cCalcWeight" maxlength="5">                        </div>                        <div class="ec-calc-form-value">                            <div class="ec-calc-form__label">Объем, м<sup>3</sup></div>                            <input type="text" id="ecCalcValue" class="cCalcValue" maxlength="5">                        </div>                        <div class="ec-calc-form-size">                            <div class="ec-calc-form__label">Размеры ДхШхВ, см</div>                            <input type="text" id="sizeWidth" class="sizeWidth" maxlength="5">                            <input type="text" id="sizeHeight" class="sizeHeight" maxlength="5">                            <input type="text" id="sizeLong" class="sizeLong" maxlength="5">                        </div>                        <div class="ec-calc-form-clone-btn">                            <div class="cCalcItemClose">Удалить</div>                            <div class="cCalcItemAdd">Добавить место</div>                        </div>                       </div>                    </div>                    <div class="ec-calc-form-dop"></div>                    <button class="ec-calc-form-submit" id="acCalcGetResult">Рассчитать</button>                </div>                <div class="ec-calc-border">                    <div class="ec-calc-border-load-bar">                        <div class="ec-calc-border-bar"></div>                        <div class="ec-calc-border-bar"></div>                        <div class="ec-calc-border-bar"></div>                    </div>                </div>                <div class="ec-calc-preload"></div>                <div class="ec-calc-error"></div>                <div class="ec-calc-result" id="ecCalcResult">                    <div class="ec-calc-result__header">Результат</div>                    <table class="ec-calc-result-table">                        <thead>                            <tr>                                <th>Компании</th>                                <th>Перевозка</th>                                <th>Стоимость</th>                            </tr>                        </thead>                        <tbody id="ecCalcResultTbody">                        </tbody>                    </table>                </div>            <div class="ec-calc-agree">Стоимость является <span title="Окончательная стоимость уточняется на складе при обмере груза. Обратите внимание, возможный платный въезд на терминал может быть не учтен.">ориентировочной</span></div>            <div class="ec-calc-made">Использует систему <a href="https://kto-dostavit.ru/">kto-dostavit.ru</a></div>            </div>        </div>';function R(e){S(".ec-calc-border-load-bar").fadeIn();var t="";for(var c in e)t+=e[c]+"\n";return S("#ecCalcResult").hide(),S(".ec-calc-error").text(t),S(".ec-calc-error").fadeIn(),S(".ec-calc-border-load-bar").fadeOut(),!1}a(document).ready(function(a){try{a.extend(m,function(){for(var e,t=S("#dcsbl").attr("src").split("?"),c={},a=(e=(e=t[t.length-1]).split("&")).length-1;0<=a;a--){var i=e[a].split("=");c[i[0]]=i[1]}return c}())}catch(e){}var e;if(e="simple"==m.theme?"delivery-simple":"delivery",a("<link>",{rel:"stylesheet",type:"text/css",href:"https://dostavka.sbl.su/api/"+e+".css?94055"}).appendTo("head"),0==m.innerDeliv?(a("body").append(C),"yes"===m.btn&&(a("body").append('<div class="ec-calc--call call-ec-widget">Рассчитать доставку</div>').find(".ec-calc--call").css("background",m.btnBg),"left"===m.pos&&a(".ec-calc--call").addClass("ec-calc--call--left"),0!=m.btnText&&a(".ec-calc--call").text(m.btnText))):a(".ec-delivery:eq(0)").html(C),0!==m.title&&a(".ec-calc__header__text").text(m.title),0===m.startCt&&""!=a(".ecStartCity").text())try{var t=a(".ecStartCity").text().split(",");a("#ecCalcCityFrom").val(t[0]),a("#ecCalcCityFromHidden").val(t[1].replace(" ",""))}catch(e){console.log(e)}m.startCntr&&m.startCt&&(a("#ecCalcCityFrom").val(m.startCt),a("#ecCalcCityFromHidden").val(m.startCntr),a("#ecCalcAreaFromHidden").val(0===m.startArea?"":m.startArea),1==m.startPick&&(a("#ecCalcCheckPickup").prop("checked",!1),a(".ec-calc-form-from, .ec-calc-form-pickup").hide())),1==m.dopLathing&&a(".ec-calc-form-dop").append('<div class="ec-calc-form-row"><div class="ec-calc-form-dop-checks"><input type="checkbox" id="ecCalcCheckLathing"><label for="ecCalcCheckLathing" class="ec-calc-form__label">Обрешетка</label><div class="ec-calc-form-dop-checks__comment">Если вам требуется жесткая упаковка груза, то поставьте галочку.</div></div></div>'),1==m.dopLathingImp&&a("#ecCalcCheckLathing").prop("checked",!0),1==m.dopInsure&&(a(".ec-calc-form-dop").append('<div class="ec-calc-form-row"><div class="ec-calc-form-dop-checks"><input type="checkbox" id="ecCalcCheckInsure" checked><label for="ecCalcCheckInsure" class="ec-calc-form__label">Страхование <input type="text" placeholder="Сумма" id="ecCalcCheckInsureVal" class="ec-calc-form__input-small"></label><div class="ec-calc-form-dop-checks__comment">Если вам требуется страховка груза, то поставьте галочку.</div></div></div>'),0!=m.dopInsureSum&&(a("#ecCalcCheckInsure").prop("checked",!0),a("#ecCalcCheckInsureVal").val(m.dopInsureSum))),1==m.sizeShow&&(a(".ec-calc-form-value").hide(),a(".ec-calc-form-size").css("display","block"));var c=a("body").find('[itemtype="http://schema.org/Product"]').first(),i=c.find('[itemprop="name"]').text(),l=c.find('[itemprop="image"]').attr("src"),s=c.find('[itemprop="description"]').text().slice(0,128),n=c.find('[itemprop="weight"]').text(),o=c.find('[itemprop="volume"]').text();if(1<=c.length&&1<=n.length&&1<=o.length&&(a(".ec-calc-wrap-item").html('<div class="ec-calc-item"><div class="ec-calc-item__img"></div><div class="ec-calc-item__title"></div><div class="ec-calc-item__descr"></div><input type="hidden" value="" class="cCalcValue"><input type="hidden" value="" class="cCalcWeight"></div>'),a(".ec-calc-item__title").text(i),a(".ec-calc-item__descr").text(""!=s?s+" ...":""),a(".cCalcValue").val(o),a(".cCalcWeight").val(n),l&&a(".ec-calc-item__img").html('<img src="'+l+'">')),0!=m.weight&&a("#ecCalcWeight").val(m.weight),0!=m.value)a("#ecCalcValue").val(m.value);else if(0==m.value&&0!=m.size){var r=m.size.split(","),u=1;if(3==r.length){for(var d=0;d<r.length;d++)a(".ec-calc-form-size input")[d].value=parseInt(r[d]),u*=.01*parseInt(r[d]);a("#ecCalcValue").val(u<.01?.01:u.toFixed(3))}}if(1==m.autoEnd){var p=document.createElement("script");p.type="text/javascript",p.src="https://api-maps.yandex.ru/2.0-stable/?load=package.standard&lang=ru-RU",a("head").append(p),setTimeout(function(){try{ymaps.ready(function(){var e=ymaps.geolocation.country,t=ymaps.geolocation.city;switch(e){case"Белоруссия":e="BY";break;case"Казахстан":e="KZ";break;default:e="RU"}a("#ecCalcCityTo").val(t),a("#ecCalcCityToHidden").val(e),""!=a("#ecCalcCityTo").val()&&0<a("#ecCalcWeight").val()&&0<a("#ecCalcValue").val()&&m.startCntr&&m.startCt&&1==m.autoResult&&(a(".ec-calc--preload").css("position","relative").fadeIn(),a(".ec-calc-form, .ec-calc-border, .ec-calc__header").hide(),g(),a("#ecCalcResult").append('<a href="#" class="ec-calc-again">Рассчитать с другими параметрами</a>'),a("body").on("click",".ec-calc-again",function(e){e.preventDefault(),a(".ec-calc-form, .ec-calc-border, .ec-calc__header").show(),a(this).hide(),a("#ecCalcResult").hide()}),setTimeout(function(){a(".ec-calc--preload").css("position","absolute").fadeOut(),a("#ecCalc").fadeIn()},3e3))})}catch(e){console.log(e)}},2e3)}0!=m.endCt&&0!=m.endCntr&&(a("#ecCalcCityTo").val(m.endCt),a("#ecCalcCityToHidden").val(m.endCntr),a("#ecCalcAreaToHidden").val(0===m.endArea?"":m.endArea),(0<Number(a("#ecCalcValue").val())||0<Number(a("#ecCalcWeight").val()))&&1==m.autoResult&&(a(".ec-calc-form, .ec-calc-border, .ec-calc__header").hide(),g(),a("#ecCalcResult").append('<a href="#" class="ec-calc-again">Рассчитать с другими параметрами</a>'),a("body").on("click",".ec-calc-again",function(e){e.preventDefault(),a(".ec-calc-form, .ec-calc-border, .ec-calc__header").show(),a(this).hide()})),setTimeout(function(){a(".ec-calc--preload").css("position","absolute").fadeOut(),a("#ecCalc").fadeIn()},5e3));try{csblCustomFunc(a)}catch(e){}function h(){1==a(".ec-calc-wrap-item").length?a(".cCalcItemClose").hide():a(".cCalcItemClose").show()}setTimeout(function(){var e=a("#ecCalcLay"),t=e.innerWidth();650<=t?e.addClass("ec-calc-widget--650"):500<=t?e.addClass("ec-calc-widget--500"):e.addClass("ec-calc-widget--mobile"),0!=m.endCt&&0!=m.endCntr||(a(".ec-calc--preload").css("position","absolute").fadeOut(),a("#ecCalc").fadeIn())},500),a("#ecCalcCityFrom").autocomplete({serviceUrl:f+"/city/from-group",minChars:1,dataType:"json",paramName:"from-city-like",deferRequestBy:300,transformResult:function(e,t){return{suggestions:a.map(e.cities,function(e){if(e[2].toUpperCase().match(t.toUpperCase()))return{value:e[2],data:e[0],other:e[1]}})}},onSelect:function(e){a("#ecCalcCityFromHidden").val(e.data),a("#ecCalcAreaFromHidden").val(e.other)},formatResult:function(e,t){return'<i class="csblflags_'+y(e.data)+'"></i>'+e.value+", <span>"+e.other+"</span>"},showNoSuggestionNotice:!0,noSuggestionNotice:"Такого маршрута в базе не найдено."}),a("#ecCalcCityTo").autocomplete({noCache:!0,serviceUrl:function(e,t){return f+"/city/to-group?from-country="+encodeURIComponent(a("#ecCalcCityFromHidden").val())+"&from-city="+encodeURIComponent(a("#ecCalcCityFrom").val())},minChars:1,dataType:"json",paramName:"to-city-like",deferRequestBy:300,transformResult:function(e,t){return{suggestions:a.map(e.cities,function(e){if(e[2].toUpperCase().match(t.toUpperCase()))return{value:e[2],data:e[0],other:e[1]}})}},onSelect:function(e){a("#ecCalcCityToHidden").val(e.data),a("#ecCalcAreaToHidden").val(e.other)},formatResult:function(e,t){return'<i class="csblflags_'+y(e.data)+'"></i>'+e.value+", <span>"+e.other+"</span>"},showNoSuggestionNotice:!0,noSuggestionNotice:"Такого маршрута в базе не найдено."}),a("#acCalcGetResult").on("click",function(e){e.preventDefault(),g()}),a(document).on("keyup","#ecCalcWeight, #ecCalcValue, .ec-calc-form-size input",function(){this.value=this.value.replace(/[^\d.|,]*/g,"").replace(/([.|,])[.|,]+/g,"$1").replace(/^[^\d]*(\d+([.|,]\d{0,5})?).*$/g,"$1")}),a(".ec-calc-form-size input").on("keyup",function(){var e=a(this).parent(".ec-calc-form-size").find(".sizeWidth").val(),t=a(this).parent(".ec-calc-form-size").find(".sizeHeight").val(),c=a(this).parent(".ec-calc-form-size").find(".sizeLong").val();a(this).parents(".ec-calc-wrap-item").find(".cCalcValue").val((1e-6*parseFloat(e*t*c)).toFixed(3))}),0==m.innerDeliv&&a(".call-ec-widget").on("click",function(e){e.preventDefault(),a("#ecCalcLay").fadeIn(),a("html").addClass("ec-lock")}),a(".ec-calc-layout, .ec-calc__close").on("click",function(e){e.target===this&&(a("#ecCalcLay").fadeOut(),a("html").removeClass("ec-lock"))});var v=a(".ec-calc-wrap-item").length;h(),a(document).on("click","div.cCalcItemAdd",function(){a(this).parents(".ec-calc-wrap-item").clone().appendTo(".ec-calc-form-clone").attr("id","clonedInput"+v).find("*").each(function(){var e=this.id||"";a(this).val(""),"cCalcCountItem"===a(this).attr("class")&&a(this).val(1),a(this).is("label")&&a(this).attr("for",a(this).attr("for")+v),0!=e.length&&(this.id+=v)}),v++,h()}),a(document).on("click","div.cCalcItemClose",function(){a(this).parents(".ec-calc-wrap-item").remove(),h()}),setTimeout(function(){a(".ec-calc--call").fadeIn()},500)})}}());